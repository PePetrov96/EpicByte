<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec='http://www.thymeleaf.org/extras/spring-security'>

<head th:replace="~{fragments/components :: site-head}"></head>

<body>
    <header th:replace="~{fragments/components :: site-navigation}"></header>

    <div class="page-container">
        <div class="orders-page-container">
            <div th:replace="~{fragments/components :: breadcrumbs}"></div>

            <div class="orders-container">
                <div th:each="orderItem : ${userOrders}" class="order-container">
                    <div class="order-text">
                        <table>
                            <tbody>
                            <tr>
                                <th th:text="#{order.number.text}"></th>
                                <td th:text="${orderItem.id}"></td>
                            </tr>
                            <tr>
                                <th th:text="#{order.date.text}"></th>
                                <td th:text="${orderItem.orderDate}"></td>
                            </tr>
                            <tr>
                                <th th:text="#{order.price.text}"></th>
                                <td th:text="${orderItem.totalCost} + ' â‚¬'"></td>
                            </tr>
                            <tr th:if="${orderItem.isComplete}">
                                <th th:text="#{order.status.text}"></th>
                                <td th:text="#{order.is.complete.text}"></td>
                            </tr>
                            <tr th:unless="${orderItem.isComplete}">
                                <th th:text="#{order.status.text}"></th>
                                <td th:text="#{order.is.pending.text}"></td>
                            </tr>
                            <tr>
                                <th th:text="#{order.address.text}"></th>
                                <td th:text="${orderItem.city} + ', ' + ${orderItem.neighborhood} + ', ' + ${orderItem.address}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <form sec:authorize="hasRole('ADMIN')"
                          th:method="POST"
                          th:action="@{/admin/order/complete/{id}(id=${orderItem.id})}"
                          th:unless="${orderItem.isComplete}"
                          class="order-button-container">
                        <input type="submit" value="Complete Order">
                    </form>
                    <form th:method="GET"
                          th:action="@{/order/details/{id}(id=${orderItem.id})}"
                          class="order-button-container">
                        <input type="submit" value="View Order">
                    </form>
                </div>
            </div>
        </div>
    </div>

</body>
<footer th:replace="~{fragments/components :: site-footer}"></footer>
</html>